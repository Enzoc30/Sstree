# Sstree


##  RADIO 0  : 17.2511
## RADIO 1  : 15.9847


Link del embeding.dat y Json(es el mismo, pero pesa mucho para Github): 


https://drive.google.com/drive/folders/1_7MeycUghFV7k7UqC5KwUyjr1yfsLWd3?hl=es
```cpp
#include <fstream>
#include <cassert>
#include "Point.h"
#include "SStree.h"
#include <fstream>
#include <sstream>

void encontrarVecinos(const SsNode* nodo, const Point& x, std::vector<std::pair<NType , Point>>& vecinos) {
    if (nodo->isLeaf()) {
        const SsLeaf* leaf = dynamic_cast<const SsLeaf*>(nodo);
        for (const Point& p : leaf->points) {
            NType d = distance(x, p);
            vecinos.push_back(std::make_pair(d, p));
        }
    } else {
        const SsInnerNode* inner = dynamic_cast<const SsInnerNode*>(nodo);
        for (const SsNode* child : inner->children) {
            encontrarVecinos(child, x, vecinos);
        }
    }
}

// Función para encontrar y ordenar los vecinos más cercanos
std::vector<Point> encontrarYOrdenarVecinos(const SsNode* raiz, const Point& x, int k) {
    std::vector<std::pair<NType , Point>> vecinos;
    encontrarVecinos(raiz, x, vecinos);

    // Ordenar vecinos por distancia de menor a mayor
    std::sort(vecinos.begin(), vecinos.end(),
              [](const std::pair<NType , Point>& a, const std::pair<NType , Point>& b) {
                  return a.first < b.first;
              });

    std::vector<Point> p3;
    int c = 1;
    for(auto &i : vecinos){
        if(c==k){break;}
        p3.push_back(i.second);
        c+=1;
    }

    return p3;
}

int main() {

    std::string filename = "embbeding.dat";
    SsTree tree;
    tree.loadFromFile(filename);
    int k = 6;

    std::vector<Point> pp = tree.kNNQuery(tree.getRoot()->centroid, k);
    std::vector<Point> p2 = encontrarYOrdenarVecinos(tree.getRoot(), tree.getRoot()->centroid, k);


    for(int i = 0 ; i < p2.size(); i++){
        std::cout << p2[i] << std::endl  << pp[i] << std::endl << std::endl;
        assert(p2[i] == pp[i]);
    }
    std::cout << "---------------------------------------" << std::endl;
    pp.clear();
    p2.clear();

    Point point({-0.329354, 0.0103814, 0.0293186, -0.152887, -0.467196, 0.380833, -0.19452, -0.192794, 0.333443, 0.113231, -1.05604, -0.367456, 0.0258649, -0.13778, 0.267321, -0.106515, 1.05536e-05, 0.0865492, -0.444875, 0.486362, -0.672049, 0.205806, -0.131689, 0.268171, -0.265267, 0.00825359, -0.665528, -0.383417, 0.858211, 0.288223, -0.0106794, 0.833381, 0.578686, 0.138123, -0.276177, 5.16086e-05, -0.0743214, 6.9731e-06, 0.329042, -0.577877, 0.106656, -0.0100406, -0.846607, 0.331495, 0.316957, 0.162541, 0.325147, -0.168042, -0.0124507, 0.660072, 0.0557548, 0.157526, 1.08148e-06, -0.0738159, 0.527114, 0.457316, 0.281269, 0.232623, 0.0111117, 0.36476, -0.299306, 0.55773, -0.0394964, 0.30875, -0.221708, -0.723345, 4.94776e-05, -0.493951, 0.305121, -0.504119, 0.0610778, -0.183106, -0.237386, 0.773503, -0.150582, -0.238033, -0.216189, 0.560499, -0.609913, 0.186335, 0.583681, -0.343026, 0.0799357, -0.215936, 0.423738, 0.300461, -0.373479, -0.0696109, -0.207185, -2.5636e-05, -0.186611, -1.01613, 0.0524029, -0.637258, 0.118893, -0.0657115, -0.0824154, 0.0735854, 0.000138957, -1.11331, 0.141258, 0.121723, -0.0927097, -0.52485, -0.29786, 0.281815, 0.191261, 0.638327, 0.573447, -0.00277357, 0.226321, -0.00887087, -0.639491, -0.715689, -0.0031387, 0.299373, -0.488254, -0.654064, -0.531356, -0.392844, 0.52063, 0.375976, 0.713042, -0.0374107, 0.0524734, 0.16388, -0.488363, 0.178475, 0.802159, -0.172181, -0.250283, 0.260362, -0.0433381, 0.547729, 0.560356, 2.12692e-05, 0.105071, 0.402879, 0.313232, -0.0570947, 0.552262, 0.0734432, -0.735565, -0.228037, -0.0343846, 1.2177, 0.356393, 0.626894, 0.334027, -7.86084e-05, -0.633694, -0.299126, 0.177431, -0.242082, 3.24869, 1.46554, -0.210241, -7.27715e-05, -0.433143, 0.144905, -0.163187, -0.133659, 0.000115198, -0.601683, 0.176213, -0.208867, 0.0297288, -0.264062, 6.99756, -0.196469, -0.505199, 0.355259, 0.0970267, 0.380837, -0.118629, -0.677531, -1.7398e-05, 0.779415, -0.0142995, 0.719803, 0.18879, 0.584254, 0.23969, -0.0425635, 0.117123, -0.141247, 0.363361, 0.0133306, 6.636e-05, -0.259598, -0.530098, -0.309053, -0.311889, 0.584085, 0.608863, -0.249195, -0.0102176, 0.609754, 0.0330998, -0.848785, 0.102015, 0.576483, -0.158098, 0.294868, 1.41903, 0.190542, 0.55934, 0.345705, 0.421298, -0.305455, 0.257403, 0.00463311, -0.127788, -0.8019, -1.2869, 0.262432, -0.383969, -4.15893e-05, -0.829229, -0.139257, -0.317974, 0.160688, -0.0411204, 0.0415038, 0.00490629, -0.288066, -1.27556, 0.434827, -1.27322, 0.0466269, 2.92708e-05, -0.425764, -0.101976, -0.499563, -0.216771, -0.138026, -0.0654458, 0.176479, -0.272414, 0.095786, 0.44785, -0.166702, 0.0471603, -0.0798134, -0.663382, -0.610628, -0.206299, -0.227641, 0.490553, -3.48035, -0.192227, -0.0986811, -0.0863501, -0.4334, -0.276026, -0.00660354, -0.60323, -0.994139, 0.270306, -9.45131e-05, -0.354701, -0.152344, -0.173686, 0.462569, -0.503726, -0.383928, 0.332377, -0.0898358, -0.513211, 0.292884, 0.0184372, -1.48725, -0.0589925, -0.315851, -0.220676, -0.156984, -0.0594584, 0.0294446, -0.502955, -0.0959807, 0.888085, 0.135079, -0.384705, 0.698338, -0.799409, 0.25415, -0.0264412, -0.409361, -0.390953, 0.000114511, -0.73747, 0.420768, -0.112778, -0.658486, 0.429126, -0.534765, -0.16561, 0.256391, -1.00609, 0.627469, -0.0380074, 0.0354013, 3.12255e-05, 0.256985, -0.901842, -0.627066, -0.0671129, 0.460525, 2.12334, -0.681826, 0.533856, -0.237136, -7.49699e-05, -0.550941, 0.640776, -0.268557, -1.58596, -6.43003e-05, -0.294691, 0.420951, -0.103204, -0.764584, 0.344221, -0.201583, -0.271354, -0.170521, 0.0101455, 0.0790751, -0.276878, -0.153371, -0.326447, -0.337412, 0.392233, 0.168208, 0.544438, -0.0640893, -0.860536, 0.0555126, 0.440466, 0.917875, 0.14907, 0.398626, 0.240005, 0.118925, 0.328129, 0.446432, 0.34069, -0.246181, -0.229899, 0.539675, 0.488562, -0.701546, 0.768802, -0.667202, 0.470851, -0.141248, 0.478339, 0.189619, 0.115592, -0.616005, 0.324159, -0.276387, 0.28114, -0.11997, 0.00013893, 0.317165, 0.370129, 0.352728, 0.25056, -2.62893, 0.244439, 0.662652, -0.0641998, -1.52513e-05, 0.217044, -0.156155, -0.34272, 0.442582, -0.701214, 0.342578, -0.044863, 0.153345, -0.375974, 0.222792, -0.678922, 0.436276, -0.344635, 0.00167862, -0.00799453, -0.397064, 0.76276, 0.0597601, 0.985451, 0.372026, -0.16243, 0.239209, -3.13636e-06, 0.599294, 0.218707, -0.622196, 0.396601, -0.376846, 0.459598, -0.651492, -0.372203, 3.65469e-05, 0.306504, 0.23677, -0.197132, -0.556239, 0.206658, -0.184954, -0.341581, 3.5237e-05, -0.130422, -0.10513, -0.0104611, 3.47924e-06, 0.257202, -0.78654, -0.205584, -0.171887, -0.460284, 0.152263, -0.156369, 0.215082, -0.322675, -0.019234, 0.309942, 0.162177, -0.447858, 0.457315, -0.474511, 0.154512, -0.992275, -0.380526, -0.122881, -0.119047, -0.216856, -0.666054, 0.117668, -0.35894, 0.608978, -0.593703, -0.185817, 0.0453864, 0.66373, 2.29701e-05});
    pp = tree.kNNQuery(point, k);
    p2 = encontrarYOrdenarVecinos(tree.getRoot(), point, k);


    for(int i = 0 ; i < p2.size(); i++){
        std::cout << p2[i] << std::endl  << pp[i] << std::endl << std::endl;
        assert(p2[i] == pp[i]);
    }

    return 0;
}
```
